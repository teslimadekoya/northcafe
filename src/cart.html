<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cart – North Café</title>
  <link rel="stylesheet" href="output.css" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&display=swap');
  </style>

  <style>
    @media (max-width: 320px) {
      .delivery-wrapper {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 8px !important;
      }
    }
  </style>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body class="bg-white">
  <!-- Header -->
  <header class="fixed top-0 left-0 right-0 z-50 bg-white px-[64px] py-[32px] flex justify-between items-center max-md:px-[16px]">
    <nav>
      <a href="/" class="text-[#B20201] font-[700] text-[36px] leading-[44px] dancing-script max-lg:text-[24px]">North Café</a>
    </nav>
    <nav class="flex gap-[24px] items-center text-[16px] custom-font leading-[32px] max-lg:gap-[16px] max-md:hidden">
      <a href="menu.html" class="text-[#4E4E4E] custom-font hover:text-[#010101] hover:font-[700]">Menu</a>
      <a href="about.html" class="text-[#4E4E4E] custom-font hover:text-[#010101] hover:font-[700]">About</a>
      <a href="careers.html" class="text-[#4E4E4E] custom-font hover:text-[#010101] hover:font-[700]">Careers</a>
    </nav>
    <nav class="flex gap-[24px] items-center custom-font leading-[26px]">
      <div class="md:hidden flex items-center justify-center gap-[16px]">
        <i class="fas fa-search text-[#010101] text-[20px] flex items-center"></i>
        <button onclick="toggleMenu()" class="flex items-center justify-center">
          <i class="fas fa-bars text-[#010101] text-[20px] cursor-pointer"></i>
        </button>
      </div>
      <a href="login.html" class="text-[#B20201] text-[20px] font-[700] max-md:hidden custom-font">Log In</a>
      <a href="signup.html" class="px-[24px] py-[12px] custom-font text-[20px] text-white bg-[#B20201] font-[700] max-md:hidden">Sign Up</a>
    </nav>
  </header>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="fixed inset-0 z-50 bg-white hidden">
    <div class="flex flex-col h-full p-[32px]">
      <div class="flex justify-end">
        <button onclick="toggleMenu()">
          <i class="fas fa-times text-[32px]"></i>
        </button>
      </div>
      <div class="flex flex-col items-center justify-center flex-1 gap-[24px]">
        <a href="menu.html" class="text-[#4E4E4E] text-[20px] font-[500] hover:font-[700] hover:text-[#010101]">Menu</a>
        <a href="about.html" class="text-[#4E4E4E] text-[20px] font-[500] hover:font-[700] hover:text-[#010101]">About</a>
        <a href="careers.html" class="text-[#4E4E4E] text-[20px] font-[500] hover:font-[700] hover:text-[#010101]">Careers</a>
        <a href="login.html" class="text-[#B20201] text-[20px] font-[700] mt-[32px]">Log In</a>
        <a href="signup.html" class="px-[24px] py-[12px] text-[20px] text-white bg-[#B20201] font-[700] w-fit">Sign Up</a>
      </div>
    </div>
  </div>

  <main class="pt-[160px] max-sm:pt-[80px]">
    <section class="mx-[64px] max-md:mx-[16px]">
      <h1 class="text-[#010101] text-[48px] mb-[24px] text-center font-custom-font max-lg:mt-[40px] max-md:mt-[32px] max-sm:text-[40px]">
        Cart
      </h1>

      <h2 class="custom-font font-[700] text-[28px] leading-[36px] text-[#010101] mb-[24px]">Order Summary</h2>

      <div class="flex gap-[64px] max-lg:flex-col">
        <div class="w-[500px] flex-shrink-0 max-md:w-full max-xl:w-[240px] max-lg:w-full">
          <img src="/images/foodDefault.png" alt="" class="w-full object-cover rounded-[12px]">
        </div>

        <div class="flex-1 min-w-0">
          <div class="flex flex-col gap-[8px]">
            <div class="flex items-center justify-between">
              <h2 class="custom-font font-[600] text-[28px] leading-[36px] text-[#010101] max-sm:text-[32px]">
                Native Rice
              </h2>
              <i class="fas fa-trash text-[#D1D1D1] text-[20px] cursor-pointer hover:text-[#B20201] transition-colors duration-200" onclick="confirmDelete()"></i>
            </div>
            <p class="custom-font font-[400] text-[22px] text-[#4E4E4E] leading-[32px] mb-[28px]">₦4,000</p>
          </div>

          <form id="portionForm" class="flex flex-col gap-[28px] mt-[8px] w-full">
            <!-- No' of portions -->
            <div class="flex flex-col gap-[4px] w-full">
              <div class="flex justify-between items-center w-full">
                <label class="custom-font font-[400] text-[22px] text-[#4E4E4E] leading-[32px] max-sm:text-[20px]">No' of portions:</label>
                <div class="flex items-center gap-[16px]">
                  <button type="button" onclick="adjustValue('portions', -1)" class="text-[#D1D1D1] text-[28px] leading-none">−</button>
                  <span id="portions" class="font-[700] custom-font text-[22px] leading-[32px] text-[#010101] w-[40px] text-center">0</span>
                  <button type="button" onclick="adjustValue('portions', 1)" class="text-[#D1D1D1] text-[28px] leading-none">+</button>
                </div>
              </div>
              <span id="portionsError" class="text-red-500 text-sm hidden">Please select number of portions</span>
            </div>

            <!-- No' of plates -->
            <div class="flex flex-col gap-[4px] w-full">
              <div class="flex justify-between items-center w-full">
                <label class="custom-font font-[400] text-[22px] text-[#4E4E4E] leading-[32px] max-sm:text-[20px]">No' of plates:</label>
                <div class="flex items-center gap-[16px]">
                  <button type="button" onclick="adjustValue('plates', -1)" class="text-[#D1D1D1] text-[28px] leading-none">−</button>
                  <span id="plates" class="font-[700] custom-font text-[22px] leading-[32px] text-[#010101] w-[40px] text-center">0</span>
                  <button type="button" onclick="adjustValue('plates', 1)" class="text-[#D1D1D1] text-[28px] leading-none">+</button>
                </div>
              </div>
              <span id="platesError" class="text-red-500 text-sm hidden">Please select number of plates</span>
            </div>

            <!-- Portions per plate -->
            <div class="flex flex-col gap-[4px] w-full">
              <div class="flex justify-between items-center w-full">
                <label class="custom-font font-[400] text-[22px] text-[#4E4E4E] leading-[32px] max-sm:text-[20px]">Portions per plate:</label>
                <div class="flex items-center gap-[16px]">
                  <button type="button" onclick="adjustValue('ppp', -1)" class="text-[#D1D1D1] text-[28px] leading-none">−</button>
                  <span id="ppp" class="font-[700] custom-font text-[22px] leading-[32px] text-[#010101] w-[40px] text-center">0</span>
                  <button type="button" onclick="adjustValue('ppp', 1)" class="text-[#D1D1D1] text-[28px] leading-none">+</button>
                </div>
              </div>
              <span id="pppError" class="text-red-500 text-sm hidden">Please select portions per plate</span>
            </div>

            <!-- Special Instructions -->
            <div class="flex flex-col gap-[12px] mt-[24px] w-full">
              <label class="custom-font font-[400] text-[22px] text-[#4E4E4E] leading-[32px] max-sm:text-[20px]">Special Instructions:</label>
              <textarea
                placeholder="Add any special instructions for this order, or leave blank if there's nothing to add."
                class="border-[1px] border-[#D1D1D1] rounded-[12px] h-[240px] py-[12px] px-[20px] text-left align-top focus:outline-none text-[#010101] w-full resize-none"
              ></textarea>
            </div>

            <!-- Delivery Type -->
            <div class="flex flex-col gap-[4px] w-full">
              <div class="flex justify-between items-center w-full gap-[16px] delivery-wrapper">
                <label for="deliveryType" class="custom-font font-[400] text-[22px] text-[#4E4E4E] leading-[32px] max-sm:text-[20px] whitespace-nowrap">
                  Delivery Type:
                </label>
                <div class="flex flex-col w-full max-w-[300px]">
                  <span id="deliveryTypeError" class="text-red-500 text-sm mb-1 hidden">Please select a delivery type</span>
                  <div class="relative w-full">
                    <select id="deliveryType" required
                      class="appearance-none bg-[#F3F3F3] pr-[40px] pl-[24px] py-[12px] font-[600] custom-font rounded-[900px] focus:outline-none text-[#010101] w-full text-center cursor-pointer">
                      <option value="">Select Delivery Type</option>
                      <option value="express">Express Delivery (₦300.00)</option>
                      <option value="normal">Normal Delivery (₦200.00)</option>
                    </select>
                    <div class="pointer-events-none absolute top-1/2 right-[16px] transform -translate-y-1/2">
                      <span class="text-[#010101]">▼</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </section>

    <section class="mx-[64px] max-md:mx-[16px] mt-0 mb-[200px]">
      <!-- Order Total Summary -->
      <div class="mt-[48px]">
        <h2 class="custom-font font-[700] text-[28px] leading-[36px] text-[#010101] mb-[24px]">Order Total:</h2>

        <div class="flex flex-col gap-[24px] text-[22px] leading-[32px] custom-font text-[#4E4E4E] mb-[44px]">
          <div class="flex justify-between">
            <span>Item Total:</span>
            <span>₦40,000</span>
          </div>
          <div class="flex justify-between">
            <span>Delivery Fee:</span>
            <span>₦300</span>
          </div>
          <div class="flex justify-between">
            <span>Service Charge:</span>
            <span>₦300</span>
          </div>
          <div class="flex justify-between font-[700] text-[#010101]">
            <span>Total:</span>
            <span>₦46,000</span>
          </div>
        </div>
      </div>

      <!-- Delivery Location & Gift -->
      <div class="mt-[48px]">
        <h2 class="custom-font font-[700] text-[28px] leading-[36px] text-[#010101] mb-[24px]">Delivery Location & Gift:</h2>

        <div class="flex flex-col gap-[24px] mb-[44px]">
          <!-- Delivery Location -->
          <div class="flex justify-between items-center w-full gap-[16px] delivery-wrapper">
            <label for="deliveryLocation" class="custom-font font-[400] text-[22px] text-[#4E4E4E] leading-[32px] max-sm:text-[20px] whitespace-nowrap">
              Delivery Location:
            </label>
            <div class="flex flex-col w-full max-w-[300px]">
              <span id="deliveryLocationError" class="text-red-500 text-sm mb-1 hidden">Please select a delivery location</span>
              <div class="relative w-full">
                <select id="deliveryLocation" required
                  class="appearance-none bg-[#F3F3F3] pr-[40px] pl-[24px] py-[12px] font-[600] custom-font rounded-[900px] focus:outline-none text-[#010101] w-full text-center cursor-pointer">
                  <option value="">Select Location</option>
                  <option value="edc">EDC Hostel</option>
                  <option value="amethyst">Amethyst</option>
                  <option value="sst">SST</option>
                  <option value="smc">SMC</option>
                  <option value="coperative">Coperative</option>
                  <option value="faith">Faith</option>
                  <option value="pod">Pod Living</option>
                </select>
                <div class="pointer-events-none absolute top-1/2 right-[16px] transform -translate-y-1/2">
                  <span class="text-[#010101]">▼</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Gift Option -->
          <div class="flex justify-between items-center w-full">
            <div class="flex items-center gap-[12px]">
              <i class="fas fa-gift text-[#B20201]" style="font-size: 28px; line-height: 1;"></i>
              <span class="custom-font text-[22px] font-semibold leading-[32px] text-[#010101]">Send as a gift</span>
            </div>
            <label for="gift-checkbox" class="cursor-pointer">
              <input type="checkbox" id="gift-checkbox" class="hidden" />
              <i id="checkbox-icon" class="fas fa-check-square" style="font-size: 28px; line-height: 1; color: #D1D1D1;"></i>
            </label>
          </div>

          <!-- Contact Info -->
          <div class="gap-[24px] mt-[24px] mb-0">
            <h3 class="custom-font font-[700] text-[28px] leading-[36px] text-[#010101] mb-[24px]">Contact Info:</h3>
            
            <div class="flex flex-col gap-6">
              <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4">
                <label class="custom-font font-[400] text-[22px] text-[#4E4E4E] leading-[32px] max-sm:text-[20px]">Your WhatsApp Number:</label>
                <div class="flex flex-col w-full md:w-[300px]">
                  <input type="tel" required
                         class="border border-gray-300 rounded-lg p-3 text-center focus:outline-none focus:ring-2 focus:ring-[#B20201] 
                                text-[#010101] font-[600] text-[22px] leading-[32px] custom-font w-full
                                placeholder:text-gray-400 placeholder:font-normal placeholder:text-base placeholder:leading-normal"
                         placeholder="WhatsApp Number"
                        >
                  <span id="whatsappError" class="text-red-500 text-sm mt-1 hidden">Please enter your WhatsApp number</span>
                </div>
              </div>

              <div id="recipientInfo" class="hidden">
                <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4">
                  <label class="custom-font font-[400] text-[22px] text-[#4E4E4E] leading-[32px] max-sm:text-[20px]">Recepient's Fullname:</label>
                  <div class="flex flex-col w-full md:w-[300px]">
                    <input type="text" required
                           class="border border-gray-300 rounded-lg p-3 text-center focus:outline-none focus:ring-2 focus:ring-[#B20201]
                                  text-[#010101] font-[600] text-[22px] leading-[32px] custom-font w-full
                                  placeholder:text-gray-400 placeholder:font-normal placeholder:text-base placeholder:leading-normal"
                           placeholder="Recepient's Fullname"
                          >
                    <span id="nameError" class="text-red-500 text-sm mt-1 hidden">Please enter recipient's name</span>
                  </div>
                </div>

                <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4 mt-6">
                  <label class="custom-font font-[400] text-[22px] text-[#4E4E4E] leading-[32px] max-sm:text-[20px]">Recepient's Matric No:</label>
                  <div class="flex flex-col w-full md:w-[300px]">
                    <input type="text" required
                           class="border border-gray-300 rounded-lg p-3 text-center focus:outline-none focus:ring-2 focus:ring-[#B20201]
                                  text-[#010101] font-[600] text-[22px] leading-[32px] custom-font w-full
                                  placeholder:text-gray-400 placeholder:font-normal placeholder:text-base placeholder:leading-normal"
                           placeholder="Matric No'"
                          >
                    <span id="matricError" class="text-red-500 text-sm mt-1 hidden">Please enter recipient's matric number</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Payment Button -->
      <div class="w-full mt-0">
        <button type="button" onclick="validateAndSubmit()" class="px-[24px] py-[12px] custom-font text-[20px] text-white w-full bg-[#B20201] font-[700]">Make Payment</button>
      </div>
    </section>
    
    
    
    <footer class="bg-[#F3F3F3]">
        <div class="flex justify-between p-[64px] max-md:p-[32px] max-md:flex-col">
            <nav>
                <h2 class="custom-font font-[400] text-[#010101] text-[36px] leading-[44px] mb-[24px] max-md:text-[32px]">Think Big. Start at North Café.</h2>
                <a href="" class="px-[24px] py-[12px] text-[16px] text-white bg-[#B20201] font-[700] w-fit">Send Resumé</a>
            </nav>
            <nav class="flex flex-col gap-[8px] max-md:mt-[28px]">
                <h3 class="font-[600] text-[14px] leading-[22px] text-[#010101] custom-font uppercase ">COMPANY</h3>
                <a href="" class="font-[400] text-[14px] leading-[22px] text-[#4E4E4E] custom-font">Menu</a>
                <a href="" class="font-[400] text-[14px] leading-[22px] text-[#4E4E4E] custom-font">About</a>
                <a href="" class="font-[400] text-[14px] leading-[22px] text-[#4E4E4E] custom-font">Careers</a>
            </nav>
            <nav class="flex flex-col gap-[8px] max-md:mt-[28px]">
                <h3 class="font-[600] text-[14px] leading-[22px] text-[#010101] custom-font uppercase">SOCIALS</h3>
                <a href="" class="font-[400] text-[14px] leading-[22px] text-[#4E4E4E] custom-font">LinkedIn</a>
                <a href="" class="font-[400] text-[14px] leading-[22px] text-[#4E4E4E] custom-font">Youtube</a>
                <a href="" class="font-[400] text-[14px] leading-[22px] text-[#4E4E4E] custom-font">Instagram</a>
            </nav>
        </div>
        <div class="">
            <p class="font-[400] text-[14px] leading-[22px] text-[#010101] custom-font p-[32px] text-center">© 2025 North Café. All rights reserved.</p>
        </div>
    </footer>
  </main>

  <!-- Delete Confirmation Modal -->
  <div id="deleteModal" class="fixed inset-0 bg-black/60 z-50 opacity-0 pointer-events-none transition-opacity duration-200 flex items-center justify-center">
    <div class="bg-white rounded-[12px] p-[32px] max-w-[400px] w-full mx-4 transform scale-95 transition-transform duration-200">
      <h3 class="custom-font font-[600] text-[24px] text-[#010101] mb-[16px]">Remove Item</h3>
      <p class="custom-font text-[16px] text-[#4E4E4E] mb-[24px]">Are you sure you want to remove this item from your cart?</p>
      <div class="flex gap-[16px] justify-end">
        <button onclick="closeDeleteModal()" class="px-[24px] py-[12px] custom-font text-[16px] text-[#4E4E4E] border border-[#D1D1D1] rounded-[900px] hover:bg-[#F3F3F3] transition-colors duration-200">Cancel</button>
        <button onclick="removeItem()" class="px-[24px] py-[12px] custom-font text-[16px] text-white bg-[#B20201] rounded-[900px] hover:bg-[#8B0101] transition-colors duration-200">Remove</button>
      </div>
    </div>
  </div>

  <script>
    function toggleMenu() {
      const menu = document.getElementById('mobile-menu');
      const isHidden = menu.classList.contains('hidden');
      menu.classList.toggle('hidden');
      document.body.style.overflow = isHidden ? 'hidden' : '';
    }

    function adjustValue(id, change) {
      const el = document.getElementById(id);
      let current = parseInt(el.innerText);
      let updated = current + change;
      if (updated < 0) updated = 0;
      el.innerText = updated;
    }

    // Update delivery text for mobile
    function updateDeliveryText() {
      const select = document.getElementById("deliveryType");
      const locationSelect = document.getElementById("deliveryLocation");
      const isMobile = window.innerWidth <= 768;

      if (select) {
        select.options[0].text = isMobile ? "Select Type" : "Select Delivery Type";
        select.options[1].text = isMobile ? "Express (₦300)" : "Express Delivery (₦300.00)";
        select.options[2].text = isMobile ? "Normal (₦200)" : "Normal Delivery (₦200.00)";
      }

      if (locationSelect) {
        locationSelect.options[0].text = isMobile ? "Location" : "Select Location";
      }
    }

    // Run on page load and resize
    window.addEventListener("DOMContentLoaded", updateDeliveryText);
    window.addEventListener("resize", updateDeliveryText);

    // Toggle the checkbox icon color and recipient info visibility
    const checkbox = document.getElementById('gift-checkbox');
    const icon = document.getElementById('checkbox-icon');
    const recipientInfo = document.getElementById('recipientInfo');
    const recipientInputs = recipientInfo.querySelectorAll('input');

    checkbox.addEventListener('change', () => {
      if (checkbox.checked) {
        icon.style.color = '#B20201';
        recipientInfo.classList.remove('hidden');
        recipientInputs.forEach(input => input.required = true);
      } else {
        icon.style.color = '#D1D1D1';
        recipientInfo.classList.add('hidden');
        recipientInputs.forEach(input => {
          input.required = false;
          input.value = '';
          const errorId = input.id + 'Error';
          const errorElement = document.getElementById(errorId);
          if (errorElement) {
            errorElement.classList.add('hidden');
          }
        });
      }
    });

    // Form validation
    const form = document.getElementById('portionForm');
    form.addEventListener('submit', (e) => {
      if (!form.checkValidity()) {
        e.preventDefault();
        form.reportValidity();
      }
    });

    function validateAndSubmit() {
      const whatsapp = document.querySelector('input[type="tel"]').value.trim();
      const name = document.querySelector('input[placeholder="Recepient\'s Fullname"]').value.trim();
      const matric = document.querySelector('input[placeholder="Matric No\'"]').value.trim();
      const deliveryType = document.getElementById('deliveryType').value;
      const deliveryLocation = document.getElementById('deliveryLocation').value;
      const portions = parseInt(document.getElementById('portions').innerText);
      const plates = parseInt(document.getElementById('plates').innerText);
      const ppp = parseInt(document.getElementById('ppp').innerText);
      const isGift = document.getElementById('gift-checkbox').checked;

      let isValid = true;

      // Reset all error messages
      document.querySelectorAll('.text-red-500').forEach(el => el.classList.add('hidden'));

      // Validate portions, plates, and ppp
      if (portions === 0) {
        document.getElementById('portionsError').classList.remove('hidden');
        isValid = false;
      }
      if (plates === 0) {
        document.getElementById('platesError').classList.remove('hidden');
        isValid = false;
      }
      if (ppp === 0) {
        document.getElementById('pppError').classList.remove('hidden');
        isValid = false;
      }

      // Validate WhatsApp
      if (!whatsapp) {
        document.getElementById('whatsappError').classList.remove('hidden');
        document.getElementById('whatsappError').textContent = 'Please enter your WhatsApp number';
        isValid = false;
      } else if (!/^0[0-9]{10}$/.test(whatsapp)) {
        document.getElementById('whatsappError').textContent = 'Please enter a valid phone number starting with 0';
        document.getElementById('whatsappError').classList.remove('hidden');
        isValid = false;
      }

      // Validate Name and Matric only if gift is checked
      if (isGift) {
        if (!name) {
          document.getElementById('nameError').classList.remove('hidden');
          isValid = false;
        } else if (!/^[A-Za-z\s]{2,50}$/.test(name)) {
          document.getElementById('nameError').textContent = 'Name must contain only letters and spaces (2-50 characters)';
          document.getElementById('nameError').classList.remove('hidden');
          isValid = false;
        }

        if (!matric) {
          document.getElementById('matricError').classList.remove('hidden');
          isValid = false;
        } else if (!/^[0-9]{11}$/.test(matric)) {
          document.getElementById('matricError').textContent = 'Please enter a valid 11-digit matric number';
          document.getElementById('matricError').classList.remove('hidden');
          isValid = false;
        }
      }

      // Validate Delivery Type
      if (!deliveryType) {
        document.getElementById('deliveryTypeError').classList.remove('hidden');
        isValid = false;
      }

      // Validate Delivery Location
      if (!deliveryLocation) {
        document.getElementById('deliveryLocationError').classList.remove('hidden');
        isValid = false;
      }

      if (isValid) {
        // Calculate total
        const basePrice = 4000;
        const totalPortions = portions * plates * ppp;
        const itemTotal = basePrice * totalPortions;
        const deliveryFee = deliveryType === 'express' ? 300 : 200;
        const serviceCharge = 300;
        const total = itemTotal + deliveryFee + serviceCharge;

        // Update the totals in the UI
        document.querySelector('span:contains("Item Total:") + span').textContent = `₦${itemTotal.toLocaleString()}`;
        document.querySelector('span:contains("Delivery Fee:") + span').textContent = `₦${deliveryFee.toLocaleString()}`;
        document.querySelector('span:contains("Service Charge:") + span').textContent = `₦${serviceCharge.toLocaleString()}`;
        document.querySelector('span:contains("Total:") + span').textContent = `₦${total.toLocaleString()}`;

        // Show confirmation dialog
        if (confirm('Are you sure you want to proceed with the payment?')) {
          document.getElementById('portionForm').submit();
        }
      } else {
        // Scroll to the first error
        const firstError = document.querySelector('.text-red-500:not(.hidden)');
        if (firstError) {
          firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
      }
    }

    // Add input event listeners to hide error messages when user starts typing
    document.querySelectorAll('input, select').forEach(element => {
      element.addEventListener('input', function() {
        const errorId = this.id + 'Error';
        const errorElement = document.getElementById(errorId);
        if (errorElement) {
          errorElement.classList.add('hidden');
        }
      });
    });

    // Update totals when portions, plates, or ppp changes
    function updateTotals() {
      const portions = parseInt(document.getElementById('portions').innerText);
      const plates = parseInt(document.getElementById('plates').innerText);
      const ppp = parseInt(document.getElementById('ppp').innerText);
      const deliveryType = document.getElementById('deliveryType').value;

      if (portions > 0 && plates > 0 && ppp > 0) {
        const basePrice = 4000;
        const totalPortions = portions * plates * ppp;
        const itemTotal = basePrice * totalPortions;
        const deliveryFee = deliveryType === 'express' ? 300 : 200;
        const serviceCharge = 300;
        const total = itemTotal + deliveryFee + serviceCharge;

        // Update the totals in the UI
        document.querySelector('span:contains("Item Total:") + span').textContent = `₦${itemTotal.toLocaleString()}`;
        document.querySelector('span:contains("Delivery Fee:") + span').textContent = `₦${deliveryFee.toLocaleString()}`;
        document.querySelector('span:contains("Service Charge:") + span').textContent = `₦${serviceCharge.toLocaleString()}`;
        document.querySelector('span:contains("Total:") + span').textContent = `₦${total.toLocaleString()}`;
      }
    }

    // Add event listeners for portions, plates, and ppp changes
    ['portions', 'plates', 'ppp'].forEach(id => {
      document.getElementById(id).addEventListener('change', function() {
        document.getElementById(id + 'Error').classList.add('hidden');
        updateTotals();
      });
    });

    // Add event listener for delivery type changes
    document.getElementById('deliveryType').addEventListener('change', updateTotals);

    // Format WhatsApp number as user types
    document.querySelector('input[type="tel"]').addEventListener('input', function(e) {
      let value = e.target.value.replace(/\D/g, '');
      if (value.length > 11) {
        value = value.slice(0, 11);
      }
      e.target.value = value;
    });

    // Format matric number as user types
    document.querySelector('input[placeholder="Matric No\'"]').addEventListener('input', function(e) {
      let value = e.target.value.replace(/\D/g, '');
      if (value.length > 11) {
        value = value.slice(0, 11);
      }
      e.target.value = value;
    });

    // Format name as user types
    document.querySelector('input[placeholder="Recepient\'s Fullname"]').addEventListener('input', function(e) {
      let value = e.target.value.replace(/[^A-Za-z\s]/g, '');
      e.target.value = value;
    });

    function confirmDelete() {
      const modal = document.getElementById('deleteModal');
      modal.classList.remove('opacity-0', 'pointer-events-none');
      document.body.style.overflow = 'hidden';
    }

    function closeDeleteModal() {
      const modal = document.getElementById('deleteModal');
      modal.classList.add('opacity-0', 'pointer-events-none');
      document.body.style.overflow = '';
    }

    function removeItem() {
      // Here you would typically make an API call to remove the item
      // For now, we'll just close the modal
      closeDeleteModal();
      // You can add additional logic here to actually remove the item
    }

    // Close modal when clicking outside
    document.getElementById('deleteModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeDeleteModal();
      }
    });
  </script>
</body>
</html>